# MP1

Your code should compile to an executable named http_client with the following usage:

./http_client http://hostname[:port]/path/to/file

For example:
./http_client http://cs438.cs.illinois.edu/

./http_client http://localhost:5678/somedir/somefile.html

If :port is not specified, default to port 80 – the standard port for HTTP.

Your client should send an HTTP GET request based on the first argument it receives. Your client should then write
the message body of the received response to a file named output. Your client should also be able to handle redirects
as described in detail later.
You MUST use SO_REUSEADDR and SO_REUSEPORT when creating a socket. Failing to do so will lead to a penalty
(see Section 5 for the grade breakdown).

## Details on HTTP GET Request

Here's the very simple HTTP GET request generated by wget:

GET /test.txt HTTP/1.0

User-Agent: Wget/1.15 (linux-gnu)

Accept: */*

Host: localhost:3490

Connection: Keep-Alive

• GET /test.txt instructs the server to return the file called test.txt in the server's top-level web
directory.

• User-Agent identifies the type of client.

• Accept specifies what types of files are desired – the client could say “I only want audio”, or “I want text,
and I prefer html text”, etc. In this case it is saying “anything is fine”.

• Host is the URL that the client was originally told to get from – exactly what the user typed. This is useful
in case a single server has multiple domain names resolving to it (maybe www.cs.illinois.edu and
www.math.illinois.edu), and each domain name actually refers to different content. This could be a bare IP
address, if that's what the user had typed. The 3490 is the port – this server was listening on 3490, so I
called “wget localhost:3490/test.txt”.

• Connection: Keep-Alive refers to TCP connection reuse, which will be discussed in class.
Only the first line is essential for a server to know what file to give back, so your HTTP GETs can be just that first
line. HTTP specifies that the end of a request should be a marked by a blank line – so be sure to have two newlines
at the end. (This demarcation is necessary because TCP present you a stream of bytes, rather than packets.) Note that
the newlines are technically supposed to be CRLF - “\r\n”.
You may use either HTTP 1.0 or 1.1. However, notice that if you are using HTTP/1.0, the Host header is NOT
REQUIRED. If you are using HTTP/1.1, the Host header is REQUIRED. But be aware that the Host header may
still be necessary for some URLs even in HTTP/1.0.

## Handling Redirections

“The HTTP response status code 301 Moved Permanently is used for permanent URL redirection, meaning current
links or records using the URL that the response is received for should be updated. The new URL should be provided
in the Location field included with the response.” – Wikipedia page on HTTP 301
In some cases, the server may send back a status code 301, indicating that the content requested has been moved:
HTTP/1.1 301 Moved Permanently

Location: <new_url>

In such cases the client should attempt to retrieve the document in the <new_url> given in the Location field. Here
is an example from Wikipedia page:

Client request:
GET /index.php HTTP/1.1
Host: www.example.org 

Server response:
HTTP/1.1 301 Moved Permanently
Location:
http://www.example.org/index.asp

## The Assignment – HTTP Server

